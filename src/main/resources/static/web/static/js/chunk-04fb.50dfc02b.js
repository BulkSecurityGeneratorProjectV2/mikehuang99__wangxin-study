(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-04fb"],{hZMg:function(t,e,a){"use strict";a.d(e,"f",function(){return o}),a.d(e,"n",function(){return r}),a.d(e,"F",function(){return l}),a.d(e,"E",function(){return c}),a.d(e,"w",function(){return u}),a.d(e,"v",function(){return d}),a.d(e,"c",function(){return m}),a.d(e,"e",function(){return h}),a.d(e,"d",function(){return p}),a.d(e,"x",function(){return f}),a.d(e,"A",function(){return v}),a.d(e,"z",function(){return g}),a.d(e,"B",function(){return b}),a.d(e,"C",function(){return y}),a.d(e,"y",function(){return w}),a.d(e,"s",function(){return k}),a.d(e,"t",function(){return _}),a.d(e,"p",function(){return x}),a.d(e,"q",function(){return C}),a.d(e,"o",function(){return D}),a.d(e,"r",function(){return O}),a.d(e,"u",function(){return j}),a.d(e,"i",function(){return S}),a.d(e,"j",function(){return $}),a.d(e,"h",function(){return z}),a.d(e,"k",function(){return V}),a.d(e,"g",function(){return N}),a.d(e,"l",function(){return I}),a.d(e,"m",function(){return L}),a.d(e,"b",function(){return E}),a.d(e,"a",function(){return T}),a.d(e,"D",function(){return B});var n=a("QbLZ"),s=a.n(n),i=a("t3Un");function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20;return Object(i.a)({url:"/pcboss/system/loginLog/list",method:"post",data:s()({pageCurrent:e,pageSize:a},t)})}function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20;return Object(i.a)({url:"/pcboss/system/operateLog/list",method:"post",data:s()({pageCurrent:e,pageSize:a},t)})}function l(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i.a)({url:"/pcboss/system/fresh/website/view",method:"post",data:t})}function c(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i.a)({url:"/pcboss/system/fresh/website/update",method:"post",data:t})}function u(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i.a)({url:"/pcboss/system/system/config/view",method:"post",data:t})}function d(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i.a)({url:"/pcboss/system/system/config/update",method:"post",data:t})}function m(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i.a)({url:"/pcboss/system/cachelog/list",method:"post",data:t})}function h(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i.a)({url:"/pcboss/system/cachelog/view",method:"post",data:t})}function p(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i.a)({url:"/pcboss/system/cachelog/update",method:"post",data:t})}function f(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20;return Object(i.a)({url:"/pcboss/system/system/user/list",method:"post",data:s()({pageCurrent:e,pageSize:a},t)})}function v(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i.a)({url:"/pcboss/system/system/user/save",method:"post",data:t})}function g(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i.a)({url:"/pcboss/system/system/user/delete",method:"post",data:t})}function b(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i.a)({url:"/pcboss/system/system/user/update",method:"post",data:t})}function y(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i.a)({url:"/pcboss/system/system/user/view",method:"post",data:t})}function w(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i.a)({url:"/pcboss/system/system/user/update/password",method:"post",data:t})}function k(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i.a)({url:"/pcboss/system/system/role/user/list",method:"post",data:t})}function _(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i.a)({url:"/pcboss/system/system/role/user/save",method:"post",data:t})}function x(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20;return Object(i.a)({url:"/pcboss/system/system/role/list",method:"post",data:s()({pageCurrent:e,pageSize:a},t)})}function C(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i.a)({url:"/pcboss/system/system/role/save",method:"post",data:t})}function D(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i.a)({url:"/pcboss/system/system/role/delete",method:"post",data:t})}function O(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i.a)({url:"/pcboss/system/system/role/update",method:"post",data:t})}function j(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i.a)({url:"/pcboss/system/system/role/view",method:"post",data:t})}function S(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i.a)({url:"/pcboss/system/menu/role/list",method:"post",data:t})}function $(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i.a)({url:"/pcboss/system/menu/role/save",method:"post",data:t})}function z(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i.a)({url:"/pcboss/system/menu/list",method:"post",data:t})}function V(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i.a)({url:"/pcboss/system/menu/save",method:"post",data:t})}function N(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i.a)({url:"/pcboss/system/menu/delete",method:"post",data:t})}function I(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i.a)({url:"/pcboss/system/menu/update",method:"post",data:t})}function L(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i.a)({url:"/pcboss/system/menu/view",method:"post",data:t})}function E(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i.a)({url:"/pcboss/authCenter/view",method:"post",data:t})}function T(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i.a)({url:"/pcboss/authActivate/view",method:"post",data:t})}function B(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i.a)({url:"/pcboss/authActivate/viewSystemInfo",method:"post",data:t})}},"s/R4":function(t,e,a){"use strict";a.r(e);var n=a("hZMg"),s={name:"Add",data:function(){return{formData:{},rules:{roleName:[{required:!0,message:"请输入名称",trigger:"blur"}],remark:[{required:!0,message:"请输入备注",trigger:"blur"}]}}},props:{visible:{type:Boolean,default:!1},title:{type:String,default:""}},methods:{submitForm:function(t){var e=this;return this.formData.roleName?this.formData.remark?void this.$refs[t].validate(function(t){t?(e.loading.show(),n.q(e.formData).then(function(t){e.loading.hide(),200===t.code&&t.data>0?(e.tips("操作成功","success"),e.handleClose()):e.$message({type:"error",message:"提交失败"})}).catch(function(){e.loading.hide()})):e.$message({type:"error",message:"提交失败"})}):(this.$message({type:"error",message:"请输入备注"}),!1):(this.$message({type:"error",message:"请输入名称"}),!1)},handleClose:function(t){this.formData={},this.$refs.formData.resetFields(),this.$emit("close-callback")}}},i=a("KHd+"),o=Object(i.a)(s,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{width:"30%",title:t.title,visible:t.visible,"before-close":t.handleClose},on:{"update:visible":function(e){t.visible=e}}},[a("el-form",{ref:"formData",attrs:{model:t.formData,rules:t.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"名称：",prop:"roleName"}},[a("el-input",{model:{value:t.formData.roleName,callback:function(e){t.$set(t.formData,"roleName",e)},expression:"formData.roleName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"备注：",prop:"remark"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"请输入内容"},model:{value:t.formData.remark,callback:function(e){t.$set(t.formData,"remark",e)},expression:"formData.remark"}})],1)],1),t._v(" "),a("el-row",{staticStyle:{"margin-top":"17px"}},[a("el-button",{staticStyle:{float:"right","margin-left":"6px"},attrs:{size:"mini",type:"danger",plain:""},on:{click:t.handleClose}},[t._v("取 消")]),t._v(" "),a("el-button",{staticStyle:{float:"right"},attrs:{size:"mini",type:"primary"},on:{click:function(e){t.submitForm("formData")}}},[t._v("确 定")])],1)],1)},[],!1,null,null,null);o.options.__file="add.vue";var r=o.exports,l={name:"Edit",data:function(){return{rules:{roleName:[{required:!0,message:"请输入名称",trigger:"blur"}]}}},props:{formData:{type:Object,default:function(){}},visible:{type:Boolean,default:!1},title:{type:String,default:""}},methods:{handleClose:function(t){this.$refs.formData.resetFields(),this.$emit("close-callback")},handleChange:function(t){this.formData.sort=t},submitForm:function(t){var e=this;this.$refs[t].validate(function(t){t?(void 0===e.formData.id&&e.$message({type:"error",message:"更新失败"}),e.loading.show(),n.r(e.formData).then(function(t){e.loading.hide(),200===t.code&&t.data>0?(e.tips("更新成功","success"),e.handleClose()):e.$message({type:"error",message:"更新失败"})}).catch(function(){e.loading.hide()})):e.$message({type:"error",message:"更新失败"})})}}},c=Object(i.a)(l,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{width:"30%",title:t.title,visible:t.visible,"before-close":t.handleClose},on:{"update:visible":function(e){t.visible=e}}},[a("el-form",{ref:"formData",attrs:{model:t.formData,rules:t.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"名称:",prop:"roleName"}},[a("el-input",{model:{value:t.formData.roleName,callback:function(e){t.$set(t.formData,"roleName",e)},expression:"formData.roleName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"排序:"}},[a("el-input-number",{staticStyle:{width:"300px"},attrs:{min:1,max:1e4},on:{change:t.handleChange},model:{value:t.formData.sort,callback:function(e){t.$set(t.formData,"sort",e)},expression:"formData.sort"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"备注:"}},[a("el-input",{attrs:{type:"textarea"},model:{value:t.formData.remark,callback:function(e){t.$set(t.formData,"remark",e)},expression:"formData.remark"}})],1)],1),t._v(" "),a("el-row",{staticStyle:{"margin-top":"17px"}},[a("el-button",{staticStyle:{float:"right","margin-left":"6px"},attrs:{size:"mini",type:"danger",plain:""},on:{click:t.handleClose}},[t._v("取 消")]),t._v(" "),a("el-button",{staticStyle:{float:"right"},attrs:{size:"mini",type:"primary"},on:{click:function(e){t.submitForm("formData")}}},[t._v("确 定")])],1)],1)},[],!1,null,null,null);c.options.__file="edit.vue";var u=c.exports,d={name:"Pms",data:function(){return{ctrl:{load:!1},defaultProps:{children:"children",label:"label"},menus:[],menuIds:[]}},props:{id:{type:String,default:""},visible:{type:Boolean,default:!1},title:{type:String,default:""}},watch:{visible:function(t){t&&this.menusList()}},methods:{menusList:function(){var t=this;this.ctrl.load=!0,n.h({}).then(function(e){t.menus=e.data.systemMenu,t.rolemenu(t.id),t.ctrl.load=!1}).catch(function(){t.ctrl.load=!1})},rolemenu:function(t){var e=this;n.i({roleId:t}).then(function(t){e.menuIds=t.data.list,e.menus.forEach(function(t){e.setChecked(t)&&e.menuIds.splice(e.menuIds.indexOf(t.id),1)})}).catch(function(){})},setChecked:function(t){var e=this;if(-1!==this.menuIds.indexOf(t.id)){var a=0;return t.children.forEach(function(t){e.setChecked(t)&&e.menuIds.splice(e.menuIds.indexOf(t.id),1),-1!==e.menuIds.indexOf(t.id)&&(a+=1)}),a<t.children.length}},saveRoleMenu:function(){var t=this;this.ctrl.load=!0;var e={roleId:this.id,menuId:[]};this.$refs.tree.getCheckedKeys().concat(this.$refs.tree.getHalfCheckedKeys()).forEach(function(t,a){e.menuId.push(t)}),n.j(e).then(function(e){t.ctrl.load=!1,200===e.code&&e.data>0?(t.tips("保存成功","success"),t.handleClose()):t.$alert(e.msg||"提交失败")}).catch(function(){t.ctrl.load=!1})},handleClose:function(t){this.menuIds=[],this.menuList=[],this.menus=[],this.$emit("close-callback")}}},m=Object(i.a)(d,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{width:"30%",title:t.title,visible:t.visible,"before-close":t.handleClose},on:{"update:visible":function(e){t.visible=e}}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.ctrl.load,expression:"ctrl.load"}],attrs:{"label-width":"80px"}},[a("div",[a("el-tree",{ref:"tree",attrs:{data:t.menus,"default-checked-keys":t.menuIds,props:t.defaultProps,accordion:"","show-checkbox":"","highlight-current":"","node-key":"id"}})],1)]),t._v(" "),a("el-row",{staticStyle:{"margin-top":"17px"}},[a("el-button",{staticStyle:{float:"right","margin-left":"6px"},attrs:{size:"mini",type:"danger",plain:""},on:{click:t.handleClose}},[t._v("取 消")]),t._v(" "),a("el-button",{staticStyle:{float:"right"},attrs:{size:"mini",type:"primary"},on:{click:function(e){t.saveRoleMenu()}}},[t._v("确 定")])],1)],1)},[],!1,null,null,null);m.options.__file="pms.vue";var h={components:{Add:r,Edit:u,Pms:m.exports},data:function(){return{map:{},formData:{},list:[],id:"",ctrl:{load:!1,addDialogVisible:!1,pmsDialogVisible:!1},opts:{validValueList:[]},page:{beginPageIndex:1,pageCurrent:1,endPageIndex:8,pageSize:20,totalCount:0,totalPage:0},textuValidValue:{0:"禁用",1:"正常"}}},props:{visible:{type:Boolean,default:!1},title:{type:String,default:""}},mounted:function(){var t=this;this.$store.dispatch("GetOpts",{enumName:"ValidValueEnum",type:"arr"}).then(function(e){t.opts.validValueList=e}),this.roleList(1)},methods:{handleSizeChange:function(t){this.page.pageSize=t,this.roleList()},handleCurrentChange:function(t){this.page.pageCurrent=t,this.roleList()},handleCheck:function(){this.page.pageCurrent=1,this.roleList()},handleReset:function(){this.reload()},roleList:function(){var t=this;this.ctrl.load=!0,n.p(this.map,this.page.pageCurrent,this.page.pageSize).then(function(e){t.list=e.data.list,t.page.pageCurrent=e.data.pageCurrent,t.page.totalCount=e.data.totalCount,t.page.pageSize=e.data.pageSize,t.ctrl.load=!1}).catch(function(){t.ctrl.load=!1})},handleChangeStatus:function(t,e){var a=this;this.$confirm("确定要"+{0:"禁用",1:"启用"}[e]+"吗?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.ctrl.load=!0,a.changeStatus(t,e),a.reload()}).catch(function(){a.reload()})},changeStatus:function(t,e){var a=this;n.r({id:t,validValue:e}).then(function(t){if(a.ctrl.load=!1,200===t.code&&t.data>0){a.$message({type:"success",message:{0:"禁用成功",1:"启用成功"}[e]}),a.reload()}else{a.$message({type:"error",message:{0:"禁用失败",1:"启用失败"}[e]}),a.reload()}}).catch(function(){a.ctrl.load=!1})},handleDelete:function(t){var e=this;this.$confirm("确定要删除吗?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.ctrl.load=!0,n.o({id:t}).then(function(t){e.ctrl.load=!1,200===t.code&&t.data>0?(e.$message({type:"success",message:"删除成功"}),e.reload()):(e.$message({type:"error",message:"删除失败"}),e.reload())}).catch(function(){e.ctrl.load=!1})}).catch(function(){e.reload()})},handleAdd:function(){this.ctrl.addDialogVisible=!0,this.ctrl.dialogTitle="添加"},handleEdit:function(t){var e=this;this.ctrl.load=!0,n.u({id:t}).then(function(t){e.ctrl.load=!1,e.formData=t.data,e.ctrl.editDialogVisible=!0,e.ctrl.dialogTitle=t.data.roleName+" —— 信息修改"}).catch(function(){e.ctrl.load=!1})},handlePms:function(t,e){this.id=t,this.ctrl.pmsDialogVisible=!0,this.ctrl.dialogTitle=e+"——设置权限"},closeCallback:function(){this.ctrl.addDialogVisible=!1,this.ctrl.editDialogVisible=!1,this.ctrl.pmsDialogVisible=!1,this.reload()},reload:function(){this.id="",this.map={},this.formData={},this.roleList()},textClass:function(t){return{c_red:0===t,c_blue:2===t}}}},p=Object(i.a)(h,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pad20"},[a("div",[a("el-form",{attrs:{inline:!0,size:"mini"}},[a("el-form-item",{attrs:{label:"名称："}},[a("el-input",{model:{value:t.map.roleName,callback:function(e){t.$set(t.map,"roleName","string"==typeof e?e.trim():e)},expression:"map.roleName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"状态:"}},[a("el-select",{staticClass:"auto-width",staticStyle:{width:"85px"},attrs:{clearable:"",filterable:"",placeholder:"状态"},model:{value:t.map.validValue,callback:function(e){t.$set(t.map,"validValue",e)},expression:"map.validValue"}},t._l(t.opts.validValueList,function(t){return a("el-option",{key:t.code,attrs:{label:t.desc,value:t.code}})}))],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{icon:"el-icon-search",type:"primary"},on:{click:t.handleCheck}},[t._v("查询")]),t._v(" "),a("el-button",{staticClass:"filter-item",attrs:{icon:"el-icon-refresh"},on:{click:t.handleReset}},[t._v("重置")]),t._v(" "),a("el-button",{directives:[{name:"has",rawName:"v-has",value:"/pcboss/system/system/role/add",expression:"'/pcboss/system/system/role/add'"}],attrs:{type:"primary",icon:"el-icon-circle-plus-outline",size:"mini"},on:{click:function(e){t.handleAdd()}}},[t._v("添加")])],1)],1)],1),t._v(" "),a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.ctrl.load,expression:"ctrl.load"}],staticStyle:{width:"100%"},attrs:{size:"medium",data:t.list,stripe:"",border:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{prop:"roleName",label:"名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"remark",label:"备注"}}),t._v(" "),a("el-table-column",{attrs:{prop:"sort",label:"排序",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{width:"170",prop:"validValue",label:"状态",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-switch",{attrs:{"active-value":0,"inactive-value":1,"active-color":"#ff4949","inactive-color":"#13ce66","active-text":"禁用","inactive-text":"正常"},on:{change:function(a){t.handleChangeStatus(e.row.id,e.row.validValue)}},model:{value:e.row.validValue,callback:function(a){t.$set(e.row,"validValue",a)},expression:"scope.row.validValue"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"270"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("ul",{staticClass:"list-item-actions"},[a("li",[a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){t.handleDelete(e.row.id)}}},[t._v("删除")]),t._v(" "),a("el-button",{directives:[{name:"has",rawName:"v-has",value:"/pcboss/system/system/role/view",expression:"'/pcboss/system/system/role/view'"}],attrs:{type:"success",size:"mini"},on:{click:function(a){t.handleEdit(e.row.id)}}},[t._v("修改")]),t._v(" "),a("el-button",{directives:[{name:"has",rawName:"v-has",value:"/pcboss/system/menu/list",expression:"'/pcboss/system/menu/list'"}],attrs:{type:"success",size:"mini"},on:{click:function(a){t.handlePms(e.row.id,e.row.roleName)}}},[t._v("设置权限")])],1)])]}}])})],1)],1),t._v(" "),a("div",[a("el-pagination",{staticStyle:{float:"right","margin-top":"20px","margin-bottom":"22px"},attrs:{background:"","page-size":t.page.pageSize,"page-sizes":[20,50,100,200,500,1e3],layout:"total, sizes, prev, pager, next, jumper",total:t.page.totalCount},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}),t._v(" "),a("add",{attrs:{visible:t.ctrl.addDialogVisible,title:t.ctrl.dialogTitle},on:{"close-callback":t.closeCallback}}),t._v(" "),a("edit",{attrs:{visible:t.ctrl.editDialogVisible,formData:t.formData,title:t.ctrl.dialogTitle},on:{"close-callback":t.closeCallback}}),t._v(" "),a("pms",{attrs:{visible:t.ctrl.pmsDialogVisible,id:t.id,title:t.ctrl.dialogTitle},on:{"close-callback":t.closeCallback}})],1)])},[],!1,null,null,null);p.options.__file="index.vue";e.default=p.exports}}]);