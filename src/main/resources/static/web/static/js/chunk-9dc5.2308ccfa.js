(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-9dc5"],{"/UpK":function(e,t,a){},My9w:function(e,t,a){"use strict";var i=a("/UpK");a.n(i).a},VhWj:function(e,t,a){},dKh2:function(e,t,a){"use strict";a.r(t);var i=a("qiqU"),s=a("bBdc"),n={name:"Edit",data:function(){return{opts:{},rules:{newsType:[{required:!0,message:"请输入资讯标题",trigger:"blur"}]}}},props:{formData:{type:Object,default:function(){}},visible:{type:Boolean,default:!1},title:{type:String,default:""}},mounted:function(){},methods:{handleChange:function(e){this.formData.sort=e},handleClose:function(e){this.$refs.formData.resetFields(),this.$emit("close-callback")},handleAvatarSuccess:function(e,t){this.formData.advertImg=URL.createObjectURL(t.raw)},handlePost:function(e){var t=this;console.log(e);var a=new FormData;a.append("picFile",e.file),s.d(a).then(function(e){t.formData.advertImg=e.data,console.log(t.formData.advertImg)}).catch(function(){t.$message({showClose:!0,message:"上传失败",type:"error"})})},submitForm:function(e){var t=this;if(void 0===this.formData)this.$message({showClose:!0,message:"提交失败",type:"error"});else{if(!this.formData.newsType)return this.$message({type:"error",message:"请输入资讯类型"}),!1;if(!this.formData.sort)return this.$message({type:"error",message:"请输入广告排序"}),!1;this.loading.show(),void 0===this.formData.id?i.f(this.formData).then(function(e){t.loading.hide(),200===e.code&&e.data>0?t.handleClose("close-callback"):t.$message({showClose:!0,message:"提交失败",type:"error"})}).catch(function(){t.loading.hide()}):(this.loading.show(),i.g(this.formData).then(function(e){t.loading.hide(),t.load=!1,200===e.code&&e.data>0?t.handleClose("close-callback"):t.$message({showClose:!0,message:"提交失败",type:"error"})}).catch(function(){t.loading.hide()}))}}}},o=(a("qa8o"),a("KHd+")),r=Object(o.a)(n,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{width:"60%",title:e.title,visible:e.visible,"before-close":e.handleClose},on:{"update:visible":function(t){e.visible=t}}},[a("el-form",{ref:"formData",attrs:{model:e.formData,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"资讯类型:",prop:"newsTitle"}},[a("el-input",{model:{value:e.formData.newsType,callback:function(t){e.$set(e.formData,"newsType",t)},expression:"formData.newsType"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"广告排序:",prop:"sort"}},[a("el-input-number",{staticStyle:{width:"300px"},attrs:{min:1,max:1e3,label:"描述文字"},on:{change:e.handleChange},model:{value:e.formData.sort,callback:function(t){e.$set(e.formData,"sort",t)},expression:"formData.sort"}})],1)],1),e._v(" "),a("el-row",{staticStyle:{"margin-top":"17px"}},[a("el-button",{staticStyle:{float:"right","margin-left":"6px"},attrs:{size:"mini",type:"danger",plain:""},on:{click:e.handleClose}},[e._v("取 消")]),e._v(" "),a("el-button",{staticStyle:{float:"right"},attrs:{size:"mini",type:"primary"},on:{click:function(t){e.submitForm("formData")}}},[e._v("确定")])],1)],1)},[],!1,null,null,null);r.options.__file="edit.vue";var l=r.exports,c={name:"Add",data:function(){return{visibleEditorFlag:!0,editor:{},opts:{advertTargetList:[]},platShows:[{code:0,desc:"电脑端"},{code:2,desc:"移动端"}],advertImg:"",formData:{sort:1},rules:{advertImg:[{required:!0,message:"请输入广告图片",trigger:"blur",autocomplete:"on"}],newsTitle:[{required:!0,message:"请输入资讯标题",trigger:"blur"}],advertType:[{required:!0,message:"请输入广告类型",trigger:"blur"}],advertUrl:[{required:!0,message:"请输入广告链接",trigger:"blur"}],newsContent:[{required:!0,message:"请输入资讯内容",trigger:"blur"}],sort:[{required:!0,message:"请输入广告排序",trigger:"blur"}],beginTime:[{required:!0,message:"请输入开始时间",trigger:"blur"}],endTime:[{required:!0,message:"请输入结束时间",trigger:"blur"}]}}},props:{visible:{type:Boolean,default:!1},title:{type:String,default:""}},mounted:function(){},methods:{editorUpload:function(e,t){var a=this,i=e[0],n=new FormData;n.append("picFile",i,i.name),s.d(n).then(function(e){if(200===e.code){var a=e.data;t(a)}}).catch(function(){a.$message({type:"error",message:"上传图片出错，请稍后重试"})})},handleChange:function(e){this.formData.sort=e},handleClose:function(e){this.advertImg="",this.$refs.formData.resetFields(),this.$emit("close-callback")},handleAvatarSuccess:function(e,t){this.formData.advertImg=URL.createObjectURL(t.raw)},handlePost:function(e){var t=this;console.log(e);var a=new FormData;a.append("picFile",e.file),s.d(a).then(function(e){t.advertImg=e.data,console.log(t.advertImg)}).catch(function(){t.$message({showClose:!0,message:"上传失败",type:"error"})})},submitForm:function(e){var t=this;if(void 0===this.formData)this.$message({showClose:!0,message:"提交失败",type:"error"});else{if(!this.formData.newsType)return this.$message({type:"error",message:"请输入资讯类型"}),!1;if(!this.formData.sort)return this.$message({type:"error",message:"请输入资讯排序"}),!1;this.loading.show(),i.f(this.formData).then(function(e){t.loading.hide(),200===e.code&&e.data>0?t.handleClose("close-callback"):t.$message({showClose:!0,message:"提交失败",type:"error"})}).catch(function(){t.loading.hide()})}}}},d=(a("My9w"),Object(o.a)(c,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{width:"60%",title:e.title,visible:e.visible,"before-close":e.handleClose},on:{"update:visible":function(t){e.visible=t}}},[a("el-form",{ref:"formData",attrs:{model:e.formData,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"资讯类型:",prop:"newsType"}},[a("el-input",{model:{value:e.formData.newsType,callback:function(t){e.$set(e.formData,"newsType",t)},expression:"formData.newsType"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"资讯类型排序:",prop:"sort"}},[a("el-input-number",{staticStyle:{width:"300px"},attrs:{min:1,max:1e3,label:"描述文字"},on:{change:e.handleChange},model:{value:e.formData.sort,callback:function(t){e.$set(e.formData,"sort",t)},expression:"formData.sort"}})],1)],1),e._v(" "),a("el-row",{staticStyle:{"margin-top":"17px"}},[a("el-button",{staticStyle:{float:"right","margin-left":"6px"},attrs:{size:"mini",type:"danger",plain:""},on:{click:e.handleClose}},[e._v("取 消")]),e._v(" "),a("el-button",{staticStyle:{float:"right"},attrs:{size:"mini",type:"primary"},on:{click:function(t){e.submitForm("formData")}}},[e._v("确定")])],1)],1)},[],!1,null,null,null));d.options.__file="add.vue";var u={components:{Edit:l,Add:d.exports},data:function(){return{ctrl:{loading:!1,remoteAuthorLoading:!1,dialogVisible:!1,addDialogVisible:!1},opts:{platShowList:[{code:0,desc:"电脑端"},{code:2,desc:"移动端"}]},map:{},formData:{},list:[],page:{beginPageIndex:1,pageCurrent:1,endPageIndex:8,pageSize:20,totalCount:0,totalPage:0}}},mounted:function(){this.getList()},methods:{handleAddRow:function(){this.ctrl.dialogTitle="新增",this.ctrl.addDialogVisible=!0},handleUpdateRow:function(e){this.formData=e,this.ctrl.dialogTitle="编辑",this.ctrl.dialogVisible=!0},closeCallback:function(){this.ctrl.dialogVisible=!1,this.ctrl.addDialogVisible=!1,this.reload()},handleChangeStatus:function(e,t){var a=this;this.$confirm("确定要"+{0:"禁用",1:"启用"}[t]+"吗?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.ctrl.loading=!0,a.changeStatus(e,t)}).catch(function(){a.reload()})},changeStatus:function(e,t){var a=this;i.g({id:e,validValue:t}).then(function(e){if(a.ctrl.loading=!1,200===e.code&&e.data>0){a.$message({type:"success",message:{0:"禁用成功",1:"启用成功"}[t]}),a.reload()}else{a.$message({type:"error",message:{0:"禁用失败",1:"启用失败"}[t]}),a.reload()}}).catch(function(){a.ctrl.loading=!1,a.reload()})},handleDelRow:function(e){var t=this;this.$confirm("确定删除这条数据?","我要删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.ctrl.loading=!0,i.d({id:e}).then(function(e){t.ctrl.loading=!1,200===e.code&&e.data>0?(t.$message({type:"success",message:"删除成功"}),t.reload()):t.$message({type:"error",message:"删除失败"})}).catch(function(){t.ctrl.loading=!1})}).catch(function(){})},reload:function(){this.map={},this.formData={},this.getList()},handleSizeChange:function(e){this.params.pageSize=e,this.getList()},handleCurrentChange:function(e){this.page.pageCurrent=e,this.getList()},handleCheck:function(){this.page.pageCurrent=1,this.getList()},handleReset:function(){this.reload()},getList:function(){var e=this;this.ctrl.loading=!0,i.e(this.map,this.page.pageCurrent,this.page.pageSize).then(function(t){e.ctrl.loading=!1,e.list=t.data.list,e.page.pageCurrent=t.data.pageCurrent,e.page.totalCount=t.data.totalCount,e.page.pageSize=t.data.pageSize}).catch(function(){e.ctrl.loading=!1})}}},m=Object(o.a)(u,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pad20"},[a("div",[a("el-form",{attrs:{inline:!0,size:"mini"}},[a("el-form-item",{attrs:{label:"资讯类型："}},[a("el-input",{model:{value:e.map.newsType,callback:function(t){e.$set(e.map,"newsType","string"==typeof t?t.trim():t)},expression:"map.newsType"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{icon:"el-icon-search",type:"primary"},on:{click:e.handleCheck}},[e._v("查询")]),e._v(" "),a("el-button",{staticClass:"filter-item",attrs:{icon:"el-icon-refresh"},on:{click:e.handleReset}},[e._v("重置")]),e._v(" "),a("el-button",{directives:[{name:"has",rawName:"v-has",value:"/pcboss/course/advert/add",expression:"'/pcboss/course/advert/add'"}],attrs:{type:"primary",size:"mini",icon:"el-icon-circle-plus-outline"},on:{click:function(t){e.handleAddRow()}}},[e._v("添加")])],1)],1)],1),e._v(" "),a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.ctrl.loading,expression:"ctrl.loading"}],staticStyle:{width:"100%"},attrs:{size:"medium",data:e.list,stripe:"",border:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"newsType",label:"资讯类型"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sort",label:"排序",width:"90"}}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"170"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("ul",{staticClass:"list-item-actions"},[a("li",[a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){e.handleDelRow(t.row.id)}}},[e._v("删除")]),e._v(" "),a("el-button",{directives:[{name:"has",rawName:"v-has",value:"/pcboss/course/advert/edit",expression:"'/pcboss/course/advert/edit'"}],attrs:{type:"success",size:"mini"},on:{click:function(a){e.handleUpdateRow(t.row)}}},[e._v("编辑")])],1)])]}}])})],1),e._v(" "),a("div",{staticClass:"mgt20"},[a("el-pagination",{staticStyle:{float:"right","margin-top":"20px","margin-bottom":"22px"},attrs:{background:"","page-size":e.page.pageSize,"page-sizes":[20,50,100,200,500,1e3],layout:"total, sizes, prev, pager, next, jumper",total:e.page.totalCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),a("edit",{attrs:{visible:e.ctrl.dialogVisible,formData:e.formData,title:e.ctrl.dialogTitle},on:{"close-callback":e.closeCallback}}),e._v(" "),a("add",{attrs:{visible:e.ctrl.addDialogVisible,title:e.ctrl.dialogTitle},on:{"close-callback":e.closeCallback}})],1)},[],!1,null,null,null);m.options.__file="index.vue";t.default=m.exports},qa8o:function(e,t,a){"use strict";var i=a("VhWj");a.n(i).a},qiqU:function(e,t,a){"use strict";a.d(t,"b",function(){return o}),a.d(t,"c",function(){return r}),a.d(t,"h",function(){return l}),a.d(t,"a",function(){return c}),a.d(t,"e",function(){return d}),a.d(t,"f",function(){return u}),a.d(t,"g",function(){return m}),a.d(t,"d",function(){return p});var i=a("QbLZ"),s=a.n(i),n=a("t3Un");function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20;return Object(n.a)({url:"/pcboss/system/news/list",method:"post",data:s()({pageCurrent:t,pageSize:a},e)})}function r(e){return Object(n.a)({url:"/pcboss/system/news/save",method:"post",data:e})}function l(e){return Object(n.a)({url:"/pcboss/system/news/update",method:"post",data:e})}function c(e){return Object(n.a)({url:"/pcboss/system/news/delete",method:"post",data:e})}function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20;return Object(n.a)({url:"/pcboss/system/newsType/list",method:"post",data:s()({pageCurrent:t,pageSize:a},e)})}function u(e){return Object(n.a)({url:"/pcboss/system/newsType/save",method:"post",data:e})}function m(e){return Object(n.a)({url:"/pcboss/system/newsType/update",method:"post",data:e})}function p(e){return Object(n.a)({url:"/pcboss/system/newsType/delete",method:"post",data:e})}}}]);