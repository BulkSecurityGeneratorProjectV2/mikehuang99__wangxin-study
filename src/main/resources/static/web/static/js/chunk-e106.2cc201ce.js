(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-e106"],{nflL:function(t,e,a){"use strict";a.r(e);var l=a("yr2c"),s={name:"Audit",data:function(){return{applyStatus:1}},props:{formData:{type:Object,default:function(){}},visible:{type:Boolean,default:!1},title:{type:String,default:""}},methods:{handleClose:function(t){this.$emit("close-callback")},submitForm:function(t){var e=this;this.$refs[t].validate(function(t){t?(void 0===e.formData.id&&e.$message({type:"error",message:"审核失败"}),""===e.formData.applyResultDesc&&(e.formData.applyResultDesc="系统默认通过"),e.formData.applyStatus=e.applyStatus,e.loading.show(),l.a(e.formData).then(function(t){e.loading.hide(),200===t.code&&t.data>0?(e.tips("审核成功","success"),e.handleClose()):e.$message({type:"error",message:"审核失败"})}).catch(function(){e.loading.hide()})):e.$message({type:"error",message:"审核失败"})})}}},o=a("KHd+"),i=Object(o.a)(s,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:t.title,visible:t.visible,"before-close":t.handleClose,width:"30%"},on:{"update:visible":function(e){t.visible=e}}},[a("el-form",{ref:"formData",attrs:{model:t.formData,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"审核状态："}},[a("el-radio-group",{model:{value:t.applyStatus,callback:function(e){t.applyStatus=e},expression:"applyStatus"}},[a("el-radio",{attrs:{label:1}},[t._v("通过")]),t._v(" "),a("el-radio",{attrs:{label:2}},[t._v("不通过")])],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"备注："}},[a("el-input",{attrs:{type:"textarea",rows:3,placeholder:"系统默认通过"},model:{value:t.formData.applyResultDesc,callback:function(e){t.$set(t.formData,"applyResultDesc",e)},expression:"formData.applyResultDesc"}})],1)],1),t._v(" "),a("el-row",{staticStyle:{"margin-top":"17px"}},[a("el-button",{staticStyle:{float:"right","margin-left":"6px"},attrs:{size:"mini",type:"danger",plain:""},on:{click:t.handleClose}},[t._v("取 消")]),t._v(" "),a("el-button",{staticStyle:{float:"right"},attrs:{size:"mini",type:"primary"},on:{click:function(e){t.submitForm("formData")}}},[t._v("确定")])],1)],1)},[],!1,null,null,null);i.options.__file="audit.vue";var n=i.exports,r={name:"Edit",data:function(){return{editor:{}}},props:{formData:{type:Object,default:function(){}},visible:{type:Boolean,default:!1},title:{type:String,default:""}},watch:{},mounted:function(){},methods:{handleChange:function(t){this.formData.sort=t},submitForm:function(t){var e=this;this.$refs[t].validate(function(t){t?(void 0===e.formData.id&&e.$message({type:"error",message:"更新失败"}),e.loading.show(),l.d(e.formData).then(function(t){e.loading.hide(),200===t.code&&t.data>0?(e.tips("更新成功","success"),e.handleClose()):e.$message({type:"error",message:"更新失败"})}).catch(function(){e.loading.hide()})):e.$message({type:"error",message:"更新失败"})})},handleClose:function(t){this.$emit("close-callback")}}},c=Object(o.a)(r,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:t.title,visible:t.visible,"before-close":t.handleClose,width:"70%"},on:{"update:visible":function(e){t.visible=e}}},[a("el-form",{ref:"formData",attrs:{model:t.formData,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"排序："}},[a("el-input-number",{staticStyle:{width:"300px"},attrs:{min:1},on:{change:t.handleChange},model:{value:t.formData.sort,callback:function(e){t.$set(t.formData,"sort",e)},expression:"formData.sort"}})],1),t._v(" "),a("el-row",{staticStyle:{"margin-top":"17px"}},[a("el-button",{staticStyle:{float:"right","margin-left":"6px"},attrs:{size:"mini",type:"danger",plain:""},on:{click:t.handleClose}},[t._v("取 消")]),t._v(" "),a("el-button",{staticStyle:{float:"right"},attrs:{size:"mini",type:"primary"},on:{click:function(e){t.submitForm("formData")}}},[t._v("确定")])],1)],1)],1)},[],!1,null,null,null);c.options.__file="edit.vue";var u={components:{Audit:n,Edit:c.exports},data:function(){return{ctrl:{load:!1,dialogVisible:!1,editVisible:!1},map:{},formData:{},list:[],opts:{isFreeList:[],validValueList:[],isPutawayList:[],applyStatusList:[]},page:{beginPageIndex:1,currentPage:1,endPageIndex:8,pageSize:20,totalCount:0,totalPage:0}}},mounted:function(){var t=this;this.getList(),this.$store.dispatch("GetOpts",{enumName:"IsFreeEnum",type:"arr"}).then(function(e){t.opts.isFreeList=e}),this.$store.dispatch("GetOpts",{enumName:"ValidValueEnum",type:"arr"}).then(function(e){t.opts.validValueList=e}),this.$store.dispatch("GetOpts",{enumName:"IsPutawayEnum",type:"arr"}).then(function(e){t.opts.isPutawayList=e}),this.$store.dispatch("GetOpts",{enumName:"ApplyStatusEnum",type:"arr"}).then(function(e){t.opts.applyStatusList=e})},methods:{getList:function(){var t=this;this.ctrl.load=!0,l.c(this.map,this.page.pageCurrent,this.page.pageSize).then(function(e){t.ctrl.load=!1,t.list=e.data.list,t.page.pageSize=e.data.pageSize,t.page.totalCount=e.data.totalCount}).catch(function(){t.ctrl.load=!1})},handleCheck:function(){this.getList()},closeCllback:function(){this.ctrl.dialogVisible=!1,this.ctrl.editVisible=!1,this.reload()},handleChangeIsPutaway:function(t,e){var a=this;this.$confirm("确定要"+{0:"下架",1:"上下架"}[e]+"吗?下架课程后，用户不能再购买或者学习该课程。",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.changeIsPutaway(t,e),a.reload()}).catch(function(){a.reload()})},changeIsPutaway:function(t,e){var a=this;this.ctrl.load=!0,l.g({id:t.id,isPutaway:e}).then(function(t){a.ctrl.load=!1;a.$message({type:"success",message:{0:"下架成功",1:"上架成功"}[e]}),a.reload()}).catch(function(){a.ctrl.load=!1})},handleChangeValidValue:function(t,e){var a=this;this.$confirm("确定要"+{0:"禁用",1:"正常"}[e]+"吗?禁用课程之后，教师将不能看到该课程，用户将不能再购买或者学习该课程，用户界面显示'已经下架'字样",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.changeValidValue(t,e),a.reload()}).catch(function(){a.reload()})},changeValidValue:function(t,e){var a=this;this.ctrl.load=!0,l.g({id:t.id,validValue:e}).then(function(t){a.ctrl.load=!1;a.$message({type:"success",message:{0:"禁用成功",1:"启用成功"}[e]}),a.reload()}).catch(function(){a.ctrl.load=!1})},handleAudit:function(t){this.getCourseApply(t.id,"课程审核"),this.ctrl.dialogVisible=!0},handleDelete:function(t){var e=this;this.$confirm("这是一个非常危险的操作！！！确定要删除吗?一经删除，该课程(包括已经审核通过的课程)以及相关的所有数据(如相关的试题绑定关系、试卷、考试等等)将彻底物理删除并且不可恢复。用户已经下单的订单依旧保留，但是不能再显示课程信息，用户也将无法进入学习。一般情况下，强烈建议你不要进行此操作！！！本次操作课程名称【"+t.courseName+"】课程ID【"+t.id+"】。如若你一定要进行删除操作，请记录下课程名称和课程ID，便于对已有订单的确认。",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$confirm("再次确认删除！！！本次操作课程名称【"+t.courseName+"】课程ID【"+t.id+"】。如若你一定要进行删除操作，请记录下课程名称和课程ID，便于对已有订单的确认。",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){l.b(t.id).then(function(t){e.$message({type:"success",message:"删除成功"}),e.reload()}).catch(function(){e.$message({type:"success",message:"删除失败"}),e.reload()})}).catch(function(){e.reload()})}).catch(function(){e.reload()})},handleEdit:function(t){this.getCourseApply(t.id,"编辑"),this.ctrl.editVisible=!0},getCourseApply:function(t,e){var a=this;this.ctrl.load=!0,l.e(t).then(function(t){a.formData=t.data,a.ctrl.dialogTitle=t.data.courseName+" —— "+e,a.ctrl.load=!1}).catch(function(){a.ctrl.load=!1})},reload:function(){this.map={},this.formData={},this.getList()},handleReset:function(){this.reload()},handleSizeChange:function(t){this.page.pageSize=t,this.getList()},handleCurrentChange:function(t){this.page.pageCurrent=t,this.getList()},textClass:function(t){return{c_red:0===t,c_blue:1===t}},textApplyStatusClass:function(t){return{c_red:2===t,c_green:1===t,c_blue:0===t}}}},d=Object(o.a)(u,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pad20"},[a("div",{staticClass:"filter-container"},[a("el-form",{attrs:{inline:!0,size:"mini"}},[a("el-form-item",{attrs:{label:"课程名称:"}},[a("el-input",{model:{value:t.map.courseName,callback:function(e){t.$set(t.map,"courseName","string"==typeof e?e.trim():e)},expression:"map.courseName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"状态:"}},[a("el-select",{staticClass:"auto-width",staticStyle:{width:"85px"},attrs:{clearable:"",filterable:"",placeholder:"状态"},model:{value:t.map.validValue,callback:function(e){t.$set(t.map,"validValue",e)},expression:"map.validValue"}},t._l(t.opts.validValueList,function(t){return a("el-option",{key:t.code,attrs:{label:t.desc,value:t.code}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"是否免费:"}},[a("el-select",{staticClass:"auto-width",staticStyle:{width:"100px"},attrs:{clearable:"",filterable:"",placeholder:"是否免费"},model:{value:t.map.isFree,callback:function(e){t.$set(t.map,"isFree",e)},expression:"map.isFree"}},t._l(t.opts.isFreeList,function(t){return a("el-option",{key:t.code,attrs:{label:t.desc,value:t.code}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"上下架:"}},[a("el-select",{staticClass:"auto-width",staticStyle:{width:"85px"},attrs:{clearable:"",filterable:"",placeholder:"上下架"},model:{value:t.map.isPutaway,callback:function(e){t.$set(t.map,"isPutaway",e)},expression:"map.isPutaway"}},t._l(t.opts.isPutawayList,function(t){return a("el-option",{key:t.code,attrs:{label:t.desc,value:t.code}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"审核状态:"}},[a("el-select",{staticClass:"auto-width",staticStyle:{width:"100px"},attrs:{clearable:"",filterable:"",placeholder:"审核状态"},model:{value:t.map.applyStatus,callback:function(e){t.$set(t.map,"applyStatus",e)},expression:"map.applyStatus"}},t._l(t.opts.applyStatusList,function(t){return a("el-option",{key:t.code,attrs:{label:t.desc,value:t.code}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"教师姓名:"}},[a("el-input",{model:{value:t.map.teacherName,callback:function(e){t.$set(t.map,"teacherName","string"==typeof e?e.trim():e)},expression:"map.teacherName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"教师手机:"}},[a("el-input",{model:{value:t.map.teacherMobile,callback:function(e){t.$set(t.map,"teacherMobile","string"==typeof e?e.trim():e)},expression:"map.teacherMobile"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{icon:"el-icon-search",type:"primary"},on:{click:t.handleCheck}},[t._v("查询")]),t._v(" "),a("el-button",{staticClass:"filter-item",attrs:{icon:"el-icon-refresh"},on:{click:t.handleReset}},[t._v("重置")])],1)],1)],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.ctrl.load,expression:"ctrl.load"}],staticStyle:{width:"100%"},attrs:{size:"medium",data:t.list,stripe:"",border:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"40"}}),t._v(" "),a("el-table-column",{attrs:{prop:"courseName",label:"课程名称"}}),t._v(">\n\n    "),a("el-table-column",{attrs:{label:"课程分类",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n      "+t._s(e.row.subjectName1)+"/"+t._s(e.row.subjectName2)+"/"+t._s(e.row.subjectName3)+"\n      ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"是否收费",prop:"isFree",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[1===e.row.isFree?a("el-tag",{attrs:{type:"success"}},[t._v("免费")]):t._e(),t._v(" "),0===e.row.isFree?a("el-tag",{attrs:{type:"danger"}},[t._v("收费")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"原价/优惠价",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{"text-decoration":"line-through"}},[t._v(t._s(e.row.courseOriginal.toFixed(2)))]),t._v("/"+t._s(e.row.courseDiscount)+"\n      ")]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"teacherName",label:"教师名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"teacherMobile",label:"教师手机"}}),t._v(" "),a("el-table-column",{attrs:{width:"160",prop:"isPutaway",label:"上下架",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-switch",{attrs:{"active-value":0,"inactive-value":1,"active-color":"#ff4949","inactive-color":"#13ce66","active-text":"下架","inactive-text":"上架",disabled:"disabled"},on:{change:function(a){t.handleChangeIsPutaway(e.row,a)}},model:{value:e.row.isPutaway,callback:function(a){t.$set(e.row,"isPutaway",a)},expression:"scope.row.isPutaway"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{width:"160",prop:"validValue",label:"状态",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-switch",{attrs:{"active-value":0,"inactive-value":1,"active-color":"#ff4949","inactive-color":"#13ce66","active-text":"禁用","inactive-text":"正常",disabled:"disabled"},on:{change:function(a){t.handleChangeValidValue(e.row,a)}},model:{value:e.row.validValue,callback:function(a){t.$set(e.row,"validValue",a)},expression:"scope.row.validValue"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"sort",label:"排序",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{label:"审核状态",prop:"applyStatus",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[0===e.row.applyStatus?a("el-tag",{attrs:{type:"brandColor"}},[t._v("待审核")]):t._e(),t._v(" "),1===e.row.applyStatus?a("el-tag",{attrs:{type:"success"}},[t._v("审核通过")]):t._e(),t._v(" "),2===e.row.applyStatus?a("el-tag",{attrs:{type:"danger"}},[t._v("审核不通过")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"240"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{directives:[{name:"has",rawName:"v-has",value:"/pcboss/course/fresh/course/apply/update",expression:"'/pcboss/course/fresh/course/apply/update'"}],attrs:{type:"success",size:"mini"},on:{click:function(a){t.handleEdit(e.row)}}},[t._v("修改")]),t._v(" "),a("el-button",{directives:[{name:"has",rawName:"v-has",value:"/pcboss/course/fresh/course/apply/audit",expression:"'/pcboss/course/fresh/course/apply/audit'"}],attrs:{type:"primary",size:"mini"},on:{click:function(a){t.handleAudit(e.row)}}},[t._v("审核")]),t._v(" "),a("el-button",{directives:[{name:"has",rawName:"v-has",value:"/pcboss/course/fresh/course/apply/delete",expression:"'/pcboss/course/fresh/course/apply/delete'"}],attrs:{type:"danger",size:"mini"},on:{click:function(a){t.handleDelete(e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("el-pagination",{staticStyle:{float:"right","margin-top":"20px","margin-bottom":"22px"},attrs:{background:"","page-size":t.page.pageSize,"page-sizes":[20,50,100,200,500,1e3],layout:"total, sizes, prev, pager, next, jumper",total:t.page.totalCount},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}),t._v(" "),a("audit",{attrs:{visible:t.ctrl.dialogVisible,formData:t.formData,title:t.ctrl.dialogTitle},on:{"close-callback":t.closeCllback}}),t._v(" "),a("edit",{attrs:{visible:t.ctrl.editVisible,formData:t.formData,title:t.ctrl.dialogTitle},on:{"close-callback":t.closeCllback}})],1)},[],!1,null,null,null);d.options.__file="index.vue";e.default=d.exports},yr2c:function(t,e,a){"use strict";a.d(e,"c",function(){return i}),a.d(e,"e",function(){return n}),a.d(e,"d",function(){return r}),a.d(e,"a",function(){return c}),a.d(e,"b",function(){return u}),a.d(e,"f",function(){return d}),a.d(e,"g",function(){return p}),a.d(e,"n",function(){return f}),a.d(e,"o",function(){return h}),a.d(e,"h",function(){return m}),a.d(e,"j",function(){return v}),a.d(e,"k",function(){return b}),a.d(e,"l",function(){return g}),a.d(e,"i",function(){return y}),a.d(e,"m",function(){return _});var l=a("QbLZ"),s=a.n(l),o=a("t3Un");function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20;return Object(o.a)({url:"/pcboss/course/fresh/course/apply/list",method:"post",data:s()({pageCurrent:e,pageSize:a},t)})}function n(t){return Object(o.a)({url:"/pcboss/course/fresh/course/apply/view",method:"post",data:{id:t}})}function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(o.a)({url:"/pcboss/course/fresh/course/apply/update",method:"post",data:t})}function c(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(o.a)({url:"/pcboss/course/fresh/course/apply/audit",method:"post",data:t})}function u(t){return Object(o.a)({url:"/pcboss/course/fresh/course/apply/delete",method:"post",data:{id:t}})}function d(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20;return Object(o.a)({url:"/pcboss/course/fresh/course/list",method:"post",data:s()({pageCurrent:e,pageSize:a},t)})}function p(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(o.a)({url:"/pcboss/course/fresh/course/update",method:"post",data:t})}function f(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(o.a)({url:"/pcboss/course/fresh/course/updateCoursePutaway",method:"post",data:t})}function h(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(o.a)({url:"/pcboss/course/fresh/course/updateCourseValidValue",method:"post",data:t})}function m(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(o.a)({url:"/pcboss/course/fresh/course/view",method:"post",data:t})}function v(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20;return Object(o.a)({url:"/pcboss/course/course/subject/list",method:"post",data:s()({pageCurrent:e,pageSize:a},t)})}function b(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(o.a)({url:"/pcboss/course/course/subject/save",method:"post",data:t})}function g(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(o.a)({url:"/pcboss/course/course/subject/update",method:"post",data:t})}function y(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(o.a)({url:"/pcboss/course/course/subject/delete",method:"post",data:t})}function _(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(o.a)({url:"/pcboss/course/course/subject/view",method:"post",data:t})}}}]);